<?xml version="1.0" encoding="UTF-8"?>
<svg width="900" height="700" viewBox="0 0 900 700" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="startGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#1DA1F2;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#0D8BD9;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="processGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#FA5F55;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#E53E3E;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="mlGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#28A745;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1E7E34;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="endGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#6C757D;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#495057;stop-opacity:1" />
    </linearGradient>
  </defs>
  
  <!-- Background -->
  <rect width="900" height="700" fill="#F8F9FA"/>
  
  <!-- Title -->
  <text x="450" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#1DA1F2">
    Twitter Algorithm Flow
  </text>
  
  <!-- Start: User Request -->
  <ellipse cx="100" cy="100" rx="80" ry="40" fill="url(#startGradient)" stroke="#0D8BD9" stroke-width="2"/>
  <text x="100" y="95" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">User Request</text>
  <text x="100" y="110" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">userId</text>
  
  <!-- Step 1: Candidate Sourcing -->
  <rect x="250" y="70" width="140" height="60" rx="10" fill="url(#processGradient)" stroke="#E53E3E" stroke-width="2"/>
  <text x="320" y="95" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Candidate Sourcing</text>
  <text x="320" y="110" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">In-Network (50%)</text>
  <text x="320" y="120" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">Out-of-Network (30%)</text>
  <text x="320" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">Trending (20%)</text>
  
  <!-- Step 2: Feature Extraction -->
  <rect x="450" y="70" width="140" height="60" rx="10" fill="url(#mlGradient)" stroke="#1E7E34" stroke-width="2"/>
  <text x="520" y="95" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Feature Extraction</text>
  <text x="520" y="110" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">14+ Features</text>
  <text x="520" y="120" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">Engagement, Temporal</text>
  <text x="520" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">Content, Author, User</text>
  
  <!-- Step 3: Light Ranker -->
  <rect x="650" y="70" width="140" height="60" rx="10" fill="url(#mlGradient)" stroke="#1E7E34" stroke-width="2"/>
  <text x="720" y="95" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Light Ranker</text>
  <text x="720" y="110" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">Linear Model</text>
  <text x="720" y="120" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">Sigmoid Activation</text>
  <text x="720" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">Fast Filtering</text>
  
  <!-- Step 4: Heavy Ranker -->
  <rect x="250" y="200" width="140" height="60" rx="10" fill="url(#mlGradient)" stroke="#1E7E34" stroke-width="2"/>
  <text x="320" y="225" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Heavy Ranker</text>
  <text x="320" y="240" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">Neural Network</text>
  <text x="320" y="250" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">Multi-layer</text>
  <text x="320" y="260" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">High Accuracy</text>
  
  <!-- Step 5: Filtering -->
  <rect x="450" y="200" width="140" height="60" rx="10" fill="url(#processGradient)" stroke="#E53E3E" stroke-width="2"/>
  <text x="520" y="225" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Filtering</text>
  <text x="520" y="240" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">Content Filters</text>
  <text x="520" y="250" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">User Filters</text>
  <text x="520" y="260" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">Engagement Filters</text>
  
  <!-- Step 6: Mixing -->
  <rect x="650" y="200" width="140" height="60" rx="10" fill="url(#processGradient)" stroke="#E53E3E" stroke-width="2"/>
  <text x="720" y="225" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Timeline Mixing</text>
  <text x="720" y="240" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">Diversity Optimization</text>
  <text x="720" y="250" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">Final Timeline</text>
  <text x="720" y="260" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">20 Tweets</text>
  
  <!-- Step 7: Notifications -->
  <rect x="250" y="330" width="140" height="60" rx="10" fill="url(#processGradient)" stroke="#E53E3E" stroke-width="2"/>
  <text x="320" y="355" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Notifications</text>
  <text x="320" y="370" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">Personalized</text>
  <text x="320" y="380" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">Trending</text>
  <text x="320" y="390" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">Engagement</text>
  
  <!-- End: Timeline Output -->
  <ellipse cx="100" cy="360" rx="80" ry="40" fill="url(#endGradient)" stroke="#495057" stroke-width="2"/>
  <text x="100" y="355" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Timeline</text>
  <text x="100" y="370" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">Output</text>
  
  <!-- SwiftUI Visualization -->
  <rect x="450" y="330" width="140" height="60" rx="10" fill="url(#startGradient)" stroke="#0D8BD9" stroke-width="2"/>
  <text x="520" y="355" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">SwiftUI</text>
  <text x="520" y="370" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">Visualization</text>
  <text x="520" y="380" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">Real-time</text>
  <text x="520" y="390" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">Interactive</text>
  
  <!-- Performance Monitoring -->
  <rect x="650" y="330" width="140" height="60" rx="10" fill="url(#mlGradient)" stroke="#1E7E34" stroke-width="2"/>
  <text x="720" y="355" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Performance</text>
  <text x="720" y="370" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">Monitoring</text>
  <text x="720" y="380" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">Metrics</text>
  <text x="720" y="390" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="white">Analytics</text>
  
  <!-- Arrows -->
  <!-- User to Candidate Sourcing -->
  <path d="M 180 100 L 250 100" stroke="#1DA1F2" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Candidate Sourcing to Feature Extraction -->
  <path d="M 390 100 L 450 100" stroke="#FA5F55" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Feature Extraction to Light Ranker -->
  <path d="M 590 100 L 650 100" stroke="#28A745" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Light Ranker to Heavy Ranker -->
  <path d="M 720 130 L 400 200" stroke="#28A745" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Heavy Ranker to Filtering -->
  <path d="M 390 230 L 450 230" stroke="#28A745" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Filtering to Mixing -->
  <path d="M 590 230 L 650 230" stroke="#FA5F55" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Mixing to Notifications -->
  <path d="M 720 260 L 400 330" stroke="#FA5F55" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Notifications to Timeline -->
  <path d="M 250 360 L 180 360" stroke="#FA5F55" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Visualization connections -->
  <path d="M 520 200 L 520 330" stroke="#1DA1F2" stroke-width="2" fill="none" stroke-dasharray="5,5"/>
  <path d="M 720 200 L 720 330" stroke="#28A745" stroke-width="2" fill="none" stroke-dasharray="5,5"/>
  
  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
    </marker>
  </defs>
  
  <!-- Data flow labels -->
  <text x="215" y="95" font-family="Arial, sans-serif" font-size="10" fill="#1DA1F2">User Request</text>
  <text x="320" y="65" font-family="Arial, sans-serif" font-size="10" fill="#FA5F55">Candidates</text>
  <text x="520" y="65" font-family="Arial, sans-serif" font-size="10" fill="#28A745">Features</text>
  <text x="720" y="65" font-family="Arial, sans-serif" font-size="10" fill="#28A745">Light Scores</text>
  <text x="320" y="195" font-family="Arial, sans-serif" font-size="10" fill="#28A745">Heavy Scores</text>
  <text x="520" y="195" font-family="Arial, sans-serif" font-size="10" fill="#FA5F55">Filtered</text>
  <text x="720" y="195" font-family="Arial, sans-serif" font-size="10" fill="#FA5F55">Mixed</text>
  <text x="320" y="325" font-family="Arial, sans-serif" font-size="10" fill="#FA5F55">Notifications</text>
  <text x="215" y="355" font-family="Arial, sans-serif" font-size="10" fill="#6C757D">Timeline</text>
  
  <!-- Performance metrics -->
  <text x="50" y="450" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#1DA1F2">Algorithm Performance:</text>
  <text x="50" y="470" font-family="Arial, sans-serif" font-size="12" fill="#333">• Total Execution Time: &lt; 200ms</text>
  <text x="50" y="485" font-family="Arial, sans-serif" font-size="12" fill="#333">• Candidate Sourcing: ~100ms</text>
  <text x="50" y="500" font-family="Arial, sans-serif" font-size="12" fill="#333">• Ranking: ~50ms</text>
  <text x="50" y="515" font-family="Arial, sans-serif" font-size="12" fill="#333">• Filtering: ~25ms</text>
  <text x="50" y="530" font-family="Arial, sans-serif" font-size="12" fill="#333">• Mixing: ~25ms</text>
  
  <!-- Swift 6.1+ Features -->
  <text x="450" y="450" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#FA5F55">Swift 6.1+ Implementation:</text>
  <text x="450" y="470" font-family="Arial, sans-serif" font-size="12" fill="#333">• Structured Concurrency (async/await)</text>
  <text x="450" y="485" font-family="Arial, sans-serif" font-size="12" fill="#333">• Actor Isolation (@MainActor)</text>
  <text x="450" y="500" font-family="Arial, sans-serif" font-size="12" fill="#333">• SwiftUI Declarative UI</text>
  <text x="450" y="515" font-family="Arial, sans-serif" font-size="12" fill="#333">• Swift Package Manager</text>
  <text x="450" y="530" font-family="Arial, sans-serif" font-size="12" fill="#333">• Comprehensive Testing (100+ tests)</text>
  
  <!-- Quality metrics -->
  <text x="50" y="580" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#28A745">Quality Metrics:</text>
  <text x="50" y="600" font-family="Arial, sans-serif" font-size="12" fill="#333">• Test Coverage: 100% for core components</text>
  <text x="50" y="615" font-family="Arial, sans-serif" font-size="12" fill="#333">• Memory Usage: &lt; 100MB runtime</text>
  <text x="50" y="630" font-family="Arial, sans-serif" font-size="12" fill="#333">• ML Inference: &lt; 5ms per prediction</text>
  <text x="50" y="645" font-family="Arial, sans-serif" font-size="12" fill="#333">• Interface Responsiveness: 75ms</text>
  
  <text x="450" y="580" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#6C757D">Architecture Benefits:</text>
  <text x="450" y="600" font-family="Arial, sans-serif" font-size="12" fill="#333">• Modular Design</text>
  <text x="450" y="615" font-family="Arial, sans-serif" font-size="12" fill="#333">• Type Safety</text>
  <text x="450" y="630" font-family="Arial, sans-serif" font-size="12" fill="#333">• Performance Optimization</text>
  <text x="450" y="645" font-family="Arial, sans-serif" font-size="12" fill="#333">• Real-time Visualization</text>
</svg>
